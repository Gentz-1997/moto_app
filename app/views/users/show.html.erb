<% provide(:title, "マイページ") %>
<main class="bg-white py-12 mt-16 flex justify-center">
  <div class="w-2/3 shadow-xl rounded-lg">
    <h1 class="text-3xl text-center mb-8">マイページ</h1>
    <% if @user.avatar.attached? %>
      <%= image_tag @user.avatar, size: "50x50" %>
    <% else %>
      <%= image_tag "default_image.jpeg", size: "50x50" %>
    <% end %>
    <%= current_user.name %>
    <div clss="button">
      <%= link_to "編集", edit_user_registration_path(current_user), class: "w-10 bg-sky-500 text-white my-8 py-2 px-4 rounded hover:bg-sky-600 transition duration-200" %>
    </div>
    <div>
      <h2>登録したスポット</h2>
      <% @spots.each do |spot| %>
        <li><%= link_to spot.spot_name, spot_path(spot) %>-<%= spot.address %></li>
      <% end %>
    </div>
    <div>
      <h2>投稿一覧</h2>
      <% @user.posts.each do |post| %>
        <%= render 'shared/post', post: post, show_spot_info: true %>
        <% if current_user && current_user == post.user %>
          <%= link_to "編集", edit_spot_post_path(post.spot, post), class: "text-md text-blue-500 hover:text-gray-700 hover:underline mb-2" %>
          <%= button_to "削除", spot_post_path(post.spot, post), data: { confirm: "Are you sure?", turbo_confirm: "本当に削除しますか？" }, method: :delete, class: "text-md text-blue-500 hover:text-gray-700 hover:underline mb-2" %>
        <% end %>
      <% end %>
    </div>
    <div>
      <h2>お気に入りスポット</h2>
      <% @favorite_spots.each do |favorite_spot| %>
        <%= link_to favorite_spot.spot_name, spot_path(favorite_spot) %>
        <%= favorite_spot.address %>
      <% end %>
    </div>
  </div>
</main>